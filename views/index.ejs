<%-include("partials/header.ejs") %>
<div class="add">
    <form action="/add" method="get"><button type="submit">Add new</button></form>
</div>
<div class="products">
    <% if(locals.prods) {prods.forEach(prod=>{%>
        <div class="product" id="<%= prod.id %>">
            <div class="content">
            <h2>title: <%= prod.title %></h2>
            <p>amount: <%= prod.amount %></p>
            <p>price: <%= prod.price %></p>
            <p>in_stock: <%= prod.in_stock %></p>
            </div>
            <div class="button">
                 <a href="/update/<%= prod.id %>">Update</a>
                <button onclick="confirmDelet('<%= prod.id %>')" method="get">
                    Delete
                </button>
            </div>
        </div>
        <script>
            function confirmDelet(productId) {
            if (confirm("Do you really want to delete this product?")) {
                window.location.href = `/delete/${productId}`;
            } else {
                console.log("product deletion was cancelled.");
                window.location.href = "/";
            }
            }
        </script>
        <% });
       } else {%>
            <h1>No Products</h1>
    <% } %>
</div>

<%-include("partials/footer.ejs") %>